<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: home.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: home.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import styles from './styles.module.css'

/**
 * Компонент домашней страницы, предназначенной для ввода имени пользователя перед входом в чат.
 *
 * @component
 * @param {Object} props - Свойства компонента.
 * @param {object} props.socket - Объект WebSocket для взаимодействия с сервером.
 * @returns {JSX.Element} - Возвращает JSX элемент домашней страницы.
 */
const Home = ({ socket }) => {
    const navigate = useNavigate();
    // Состояние для хранения введенного пользователем имени
    const [user, setUser] = useState('');

    /**
     * Обработчик отправки формы.
     * Сохраняет имя пользователя в локальном хранилище, отправляет уведомление на сервер и перенаправляет на страницу чата.
     *
     * @param {Event} e - Событие отправки формы.
     */
    const handleSubmit = (e) => {
        e.preventDefault();

        const userCount = parseInt(localStorage.getItem('userCount')) || 0;
        const newUserKey = `user${userCount + 1}`;

        // Сохраняем информацию о новом пользователе в локальном хранилище
        localStorage.setItem(newUserKey, JSON.stringify({ user, socketID: socket.id }));
        localStorage.setItem('userCount', userCount + 1);

        // Отправляем уведомление на сервер о новом пользователе
        socket.emit('newUser', { user, socketID: socket.id });

        // Перенаправляем на страницу чата
        navigate('/chat');
    }

    return (
        &lt;div className={styles.container}>
            {/* Форма ввода имени пользователя */}
            &lt;form className={styles.form} onSubmit={handleSubmit}>
                &lt;h2>Войти в чат&lt;/h2>
                &lt;div className={styles.inputContainer}>
                    &lt;label htmlFor='user'>&lt;/label>
                    {/* Поле ввода имени пользователя */}
                    &lt;input className={styles.input} type="text" id='user' value={user} onChange={(e) => setUser(e.target.value)} />
                &lt;/div>
                {/* Кнопка входа в чат */}
                &lt;button className={styles.button} type='submit'>Войти&lt;/button>
            &lt;/form>
        &lt;/div>
    );
};

export default Home;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#Body">Body</a></li><li><a href="global.html#ChatPage">ChatPage</a></li><li><a href="global.html#Home">Home</a></li><li><a href="global.html#MessageBlock">MessageBlock</a></li><li><a href="global.html#Sidebar">Sidebar</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Nov 26 2023 23:24:40 GMT+0500 (Екатеринбург, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
